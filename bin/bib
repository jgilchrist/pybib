#!/usr/bin/env python3

import pybib

import argparse
import logging

from pybib.drivers import DriverResult

VERSION = '1.3.0'

parser = argparse.ArgumentParser(description='Retrieve BibTeX information for Digital Object Identifiers (DOIs)')

parser.add_argument('DOI', type=str, help='Retrieve an entry for a DOI')
parser.add_argument('--version', action='version', version=VERSION)
parser.add_argument('-v', '--verbose', action='store_true', help='Print information while retrieving entries')

args = parser.parse_args()

driver = pybib.drivers.DXDoi()

(result, output) = driver.get_entry(args.DOI)

if result == DriverResult.success:
    entry = output
    print(entry)
elif result == DriverResult.unknown:
    exit('Unknown DOI')
